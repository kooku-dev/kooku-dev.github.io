<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no"/><link rel="shortcut icon" href="/favicon.ico"/><script>
            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
            })(window,document,'script','dataLayer','GTM-KDDR59L');
              </script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-88SF4487LG"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-88SF4487LG');
              </script><title>Kooku&#x27;s log - 마이크로서비스 아키텍처를 모노레포로 관리하기</title><meta property="og:logo" content="https://kooku94.github.io/favicon.ico"/><meta property="og:title" content="마이크로서비스 아키텍처를 모노레포로 관리하기"/><meta property="og:image" content="https://kooku94.github.ioundefined"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:type" content="article"/><meta name="next-head-count" content="14"/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-6ea43f52d44630a19477.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.b4f0be21e3e8c82dd407.js" as="script"/><link rel="preload" href="/_next/static/chunks/b6d3ae6728fbe7f18c7a496885d917c502ef8a97.f1fb57fac8faffcae7e5.js" as="script"/><link rel="preload" href="/_next/static/chunks/82588f7d1c9cede2e30aa92ab94d8815bd9a75a3.8c80dcbcc582eee35cb5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-2cd9b9378ad45e0c3d1d.js" as="script"/><link rel="preload" href="/_next/static/chunks/b2e984c5.dde205419b836c367968.js" as="script"/><link rel="preload" href="/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.0d2a9ee544564bfee014.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bslug%5D-dc9389b4382be6e937d8.js" as="script"/></head><body><div id="__next"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KDDR59L" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><style data-emotion="css-global 1g30n2o">*{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box;}html,body{font-family:'Spoqa Han Sans Neo',sans-serif!important;margin:0;padding:0;border:0;}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,menu,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,main,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;vertical-align:baseline;}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block;}*[hidden]{display:none;}body{line-height:1;}input::-ms-clear,input::-ms-reveal{display:none;width:0;height:0;}input::-webkit-search-decoration,input::-webkit-search-cancel-button,input::-webkit-search-results-button,input::-webkit-search-results-decoration{display:none;}*:active{-webkit-tap-highlight-color:transparent;outline:none;}*:focus{outline:0;}a{-webkit-text-decoration:none;text-decoration:none;}input[type='number']::-webkit-outer-spin-button,input[type='number']::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}button,*[role='button']{cursor:pointer;}</style><style data-emotion="css bjn8wh">.css-bjn8wh{position:relative;}</style><div class="css-bjn8wh ep629fi11"><style data-emotion="css 1mwsm5">.css-1mwsm5{background:linear-gradient(72deg, #6ecaf5, #e7c6f1);position:-webkit-sticky;position:sticky;left:0;right:0;top:0;z-index:999;}</style><div class="css-1mwsm5 e1ohtyx52"><style data-emotion="css 1518suw">.css-1518suw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:60px;}@media (min-width: 1024px){.css-1518suw{max-width:1024px;margin:0 auto;}}@media (min-width: 768px) and (max-width: 1023px){.css-1518suw{max-width:960px;margin:0 32px;}}@media (max-width: 767px){.css-1518suw{max-width:100%;margin:0 16px;}}</style><nav class="css-1518suw e1ohtyx51"><style data-emotion="css itptq8">.css-itptq8{color:#ffffff;opacity:0.7;font-size:28px;font-weight:800;}</style><h3 role="button" tabindex="0" class="css-itptq8 e1ohtyx50">Kooku&#x27;s log</h3><style data-emotion="css 1p39xhz">.css-1p39xhz{float:right;padding:14px;opacity:0.6;}</style><a href="https://github.com/kooku94" aria-label="GitHub" class="css-1p39xhz"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a></nav></div><style data-emotion="css 15jvohm">@media (min-width: 1024px){.css-15jvohm{max-width:1024px;margin:auto;}}@media (min-width: 768px) and (max-width: 1023px){.css-15jvohm{margin:0 16px;}}</style><article class="css-15jvohm ep629fi9"><style data-emotion="css 1cfjemv">.css-1cfjemv{position:relative;padding-bottom:32px;}@media (min-width: 1024px){.css-1cfjemv{max-width:780px;margin:0 auto;}}@media (min-width: 768px) and (max-width: 1023px){.css-1cfjemv{max-width:780px;margin:0 32px;}}@media (max-width: 767px){.css-1cfjemv{max-width:100%;}}@media (max-width: 767px){.css-1cfjemv{margin:0 16px;}}</style><section class="css-1cfjemv ep629fi8"><style data-emotion="css 1d0nbku">.css-1d0nbku{margin-top:24px;}</style><div class="css-1d0nbku ep629fi7"><style data-emotion="css tl449l">.css-tl449l{color:#8d949f;font-size:14px;font-weight:bold;line-height:1.57;margin-right:8px;}</style><span class="css-tl449l ep629fi6">아키텍처</span></div><header><style data-emotion="css ljp8x3">.css-ljp8x3{color:#000000;margin:8px 0 24px 0;font-size:26px;font-weight:bold;line-height:1.2;}</style><h1 class="css-ljp8x3 ep629fi5">마이크로서비스 아키텍처를 모노레포로 관리하기</h1></header><style data-emotion="css 1829sa1">.css-1829sa1{color:#535a65;font-size:16px;font-weight:normal;line-height:1.63;min-height:320px;}</style><div class="css-1829sa1 ep629fi4"><style data-emotion="css 16cgglh">.css-16cgglh time{color:#9b9b9b;}.css-16cgglh p{line-height:1.5rem;margin:1rem 0 0 0;}.css-16cgglh a{font-size:1rem;color:#358cd6;-webkit-text-decoration:underline;text-decoration:underline;}.css-16cgglh h1{font-size:2rem;margin:2.5rem 0 0 0;}.css-16cgglh h2,.css-16cgglh h3,.css-16cgglh h4,.css-16cgglh h5{margin:1.5rem 0 0.5rem 0;line-height:1.25em;}.css-16cgglh h2::before{position:absolute;margin-left:-1em;font-weight:300;font-size:1.5rem;color:#9b9b9b;display:none;content:'#';}.css-16cgglh img{width:100%;}.css-16cgglh table{max-width:100%;border-spacing:0;margin-top:1.5rem;}.css-16cgglh table thead{background:#f7f7f7;}.css-16cgglh table th{font-weight:500;}.css-16cgglh table th,.css-16cgglh table td{padding:0.5em 1em;border:1px double #eee;}.css-16cgglh ul{list-style-type:disc;}.css-16cgglh ol{list-style-type:decimal;}.css-16cgglh ul ul,.css-16cgglh ol ul{list-style-type:circle;}.css-16cgglh blockquote{border-left:3px solid rgb(239, 240, 244);margin:15px 0;padding-left:16px;}.css-16cgglh blockquote p{margin-top:0;}.css-16cgglh ol,.css-16cgglh ul{padding:0 0 0 1.5rem;margin:1.5rem 0 0 0;margin:0;}.css-16cgglh ol li,.css-16cgglh ul li{line-height:1.5rem;margin:0;}.css-16cgglh .youtube-container{position:relative;width:100%;height:0;padding-bottom:56.25%;overflow:hidden;margin:20px 0;}.css-16cgglh .youtube-container iframe{width:100%;height:100%;position:absolute;top:0;left:0;}.css-16cgglh iframe{position:absolute;top:0;left:0;width:100%;height:100%;}.css-16cgglh p>code{padding:0.1rem 0.3rem;border-radius:4px;background-color:#f2f5fc;color:#275fc8;font-size:1rem;font-weight:bold;}.css-16cgglh pre{padding:1.2em;margin:1.5em 0;overflow:auto;border-radius:0.6em;color:#e0e0e0;background:#212121;font-family:'Consolas','Monaco','Andale Mono','Ubuntu Mono',monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.6;font-size:13px;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;-ms-overflow-style:none;overflow:-moz-scrollbars-none;}.css-16cgglh code[class*='language-'],.css-16cgglh pre[class*='language-']{color:#e0e0e0;background:none;font-family:'Consolas','Monaco','Andale Mono','Ubuntu Mono',monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.6;font-size:13px;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;-ms-overflow-style:none;overflow:-moz-scrollbars-none;}.css-16cgglh pre[class*='language-']::-webkit-scrollbar{display:none;}.css-16cgglh pre[class*='language-']{padding:1.2em;margin:1.5em 0;overflow:auto;border-radius:0.6em;}.css-16cgglh:not(pre)>code[class*='language-'],.css-16cgglh pre[class*='language-']{background:#212121;}.css-16cgglh:not(pre)>code[class*='language-']{padding:0.1em 0.6em;border-radius:0.2em;white-space:normal;background:$inline-dimmed-color;color:$inline-text-color;}.css-16cgglh .token.comment,.css-16cgglh .token.block-comment,.css-16cgglh .token.prolog,.css-16cgglh .token.doctype,.css-16cgglh .token.cdata{color:#868282;}.css-16cgglh .token.punctuation{color:#e0e0e0;}.css-16cgglh pre[class*='language-'] .tag{color:#358cd6;}.css-16cgglh .token.attr-name{color:#6196cc;}.css-16cgglh .token.namespace,.css-16cgglh .token.deleted{color:#e2777a;}.css-16cgglh .token.function-name{color:#6196cc;}.css-16cgglh .token.boolean{color:#358cd6;}.css-16cgglh .token.number{color:#b5ce98;}.css-16cgglh .token.function{color:#dcdcaa;}.css-16cgglh .token.property,.css-16cgglh .token.class-name,.css-16cgglh .token.constant,.css-16cgglh .token.symbol{color:#4ec9b2;}.css-16cgglh .token.selector,.css-16cgglh .token.important,.css-16cgglh .token.atrule,.css-16cgglh .token.keyword,.css-16cgglh .token.builtin{color:#c586c0;}.css-16cgglh .token.string,.css-16cgglh .token.char,.css-16cgglh .token.attr-value,.css-16cgglh .token.regex,.css-16cgglh .token.variable{color:#ce9178;}.css-16cgglh .token.operator,.css-16cgglh .token.entity,.css-16cgglh .token.url{color:#67cdcc;}.css-16cgglh .token.important,.css-16cgglh .token.bold{font-weight:bold;}.css-16cgglh .token.italic{font-style:italic;}.css-16cgglh .token.entity{cursor:help;}.css-16cgglh .token.inserted{color:green;}</style><div class="css-16cgglh ep629fi3"><h2>알고 들어야 하는 내용</h2>
<h3>Microservices Architecture &#x26; Monolithic Architecture</h3>
<blockquote>
<p>Microservices Architecture &#x26; Monolithic Architecture
주로 백엔드에서 많이 다루는 내용이긴 하지만 프론트엔드 입장에서 서술하겠습니다.<br>
frontend에서는 msa를 microservices가 아닌 microfrontends로 많이 불립니다.</p>
</blockquote>
<p>최근 몇 년동안 MSA 돌풍이 불었습니다. MSA는 서비스들을 모듈단위로 작게 쪼개어 관리를 하는 것으로 예전부터 설계해온 Monolithic Architecture 와는 반대되는 아키텍처입니다.</p>
<p>MSA를 사용했을 때 여러 장점들이 있는데 거대한 서비스들을 작은 단위로 쪼갬으로써 빌드시간이 줄어들고 특정 부분의 장애가 전체 서비스의 장애로 이어지지 않고 장애가 발생한 특정 모듈만 교체함으로 써 문제해결이 가능하게 되었습니다.(가용성)</p>
<p>뿐만 아니라 배포나 버전관리도 전체 서비스단위로 하는게 아닌 업데이트가 필요한 모듈만 배포를 함으로써 유지보수성도 매우 높아졌습니다.</p>
<p>하지만 장점만 있는건 아니였습니다. 하나로 있던 모듈들을 쪼개버리니 공통으로 사용하고 있던 부분들이 모듈들에 중복으로 들어가게 되고, 모듈들이 통신하기 위한 중계 서비스 혹은 message queue(ex. kafka)의 사용이 필수가 됨으로써 서비스 자체의 크기가 더욱 커지게 되었습니다.</p>
<h2>Overview</h2>
<p>현재 회사의 프론트엔드 프로젝트는 마이크로서비스 아키텍처를 지향하며 개발하고 있습니다. 웹뷰의 경우 도메인 하나를 사용하지만 총 4개의 서비스들로 구성이 되어 있습니다.</p>
<table>
<thead>
<tr>
<th align="center">path</th>
<th align="center">description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>/D</code></td>
<td align="center">A 서비스</td>
</tr>
<tr>
<td align="center"><code>/C</code></td>
<td align="center">B 서비스</td>
</tr>
<tr>
<td align="center"><code>/B</code></td>
<td align="center">C 서비스</td>
</tr>
<tr>
<td align="center"><code>/A</code></td>
<td align="center">D 서비스</td>
</tr>
</tbody>
</table>
<p>네 개의 프로젝트를 다루면서 여러 장단점들이 있었는데 정리하면 다음과 같습니다.</p>
<h3>장점</h3>
<ul>
<li>프로젝트 별로 기술스택을 다르게 가져갈 수 있다.
<ul>
<li>실제로 A 서비스는 vue, 다른 서비스들은 react로 개발하고 있습니다.</li>
</ul>
</li>
<li>프로젝트를 작게 가져감으로써 빌드 시간을 줄일 수 있다.</li>
</ul>
<h3>단점</h3>
<ul>
<li>여러 기술스택을 사용하니 다른 개발자들에게 부담이 될 수 있다.</li>
<li>새로운 서비스를 만들어야 할 때 프로젝트 셋팅을 처음부터 다시 해야한다.
<ul>
<li>repo 생성</li>
<li>브랜치 rule 설정</li>
<li>.github meta setting</li>
<li>ci &#x26; cd setting (너무 공수가 많이든다.)</li>
</ul>
</li>
<li>공통 모듈과 환경설정들을 공유할 수 없다.</li>
</ul>
<h2>어떻게 문제를 해결할 수 있을까?</h2>
<p>위에 서술한 단점들을 해결하기 위해서 microfrontends에서는 monorepo를 도입하기 시작했습니다. (회사 웹뷰의 경우 모든 프로젝트들을 각기 다른 레포로 관리하는 multirepo 방식을 사용하고 있습니다.)</p>
<p>yarn workspace와 lerna를 통해 여러 서비스들을 monorepo로 관리가 가능한데, 이렇게 했을 때 환경설정과 공통 컴포넌트 &#x26; 함수들을 상위에 정의함으로써 공유가 가능하고, 서비스들은 packages를 통해 msa로 관리가 가능해졌습니다.</p>
<h3>그렇다면 이제, 웹뷰 프로젝트에 적용해볼까?</h3>
<p>위에서도 설명했듯이 웹뷰 프로젝트들은 두개의 프레임워크를 사용하고 있다고 했습니다. 이렇게 서비스들이 프레임워크를 다르게 사용하니 공통 컴포넌트를 사용할 수도 없고, 환경설정도 모두 다르게 셋팅 해줘야하는 문제 발생했습니다. 모노레포의 장점을 전혀 살리지 못하는거죠.</p>
<p>그래서 모노레포로 서비스들을 마이그레이션하는 작업을 중단하게 되었습니다. 😭</p>
<h3>이대로 끝인가?</h3>
<p>결국 모노레포로 마이그레이션은 시키지 못했지만, 그래도 할 수 있는 작업들이 있습니다. (사실 vue로 되어있는 A 프로젝트를 react로 변환하면 되지만.. 너무 공수가 큽니다 ㅠ)</p>
<p>현재 진행중인 디자인 시스템을 활용해 공통 컴포넌트를 모듈로 만들어 npm에 등록시키고 react를 사용하는 곳에서 가져다 사용하는 방법으로 말이죠. (eslint도 npm에 등록)</p>
<p>한꺼번에 많은 변화를 만들어내지는 못하겠지만 조금씩 조금씩 고쳐가고 개선해 나가면, 노력은 적게들고 개발을 빠르게 할 수 있게 될 것 같습니다.</p></div></div><style data-emotion="css 9vkh6d">.css-9vkh6d{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;width:100%;margin-top:48px;}.css-9vkh6d button{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;width:240px;height:48px;border:none;margin:8px auto;border-radius:4px;font-size:16px;font-weight:bold;padding:16px;position:relative;}</style><div class="css-9vkh6d ep629fi2"><style data-emotion="css 1qw3ucq">.css-1qw3ucq{background-color:#e8f3ff;color:#1d6ff2;margin-bottom:16px;}.css-1qw3ucq>svg{position:absolute;left:16px;}</style><button class="like-button css-1qw3ucq ep629fi1"><svg viewBox="0 0 24 24" style="width:20;height:20" role="presentation" class="like-button"><path d="M12.1,18.55L12,18.65L11.89,18.55C7.14,14.24 4,11.39 4,8.5C4,6.5 5.5,5 7.5,5C9.04,5 10.54,6 11.07,7.36H12.93C13.46,6 14.96,5 16.5,5C18.5,5 20,6.5 20,8.5C20,11.39 16.86,14.24 12.1,18.55M16.5,3C14.76,3 13.09,3.81 12,5.08C10.91,3.81 9.24,3 7.5,3C4.42,3 2,5.41 2,8.5C2,12.27 5.4,15.36 10.55,20.03L12,21.35L13.45,20.03C18.6,15.36 22,12.27 22,8.5C22,5.41 19.58,3 16.5,3Z" style="fill:#1d6ff2"></path></svg>LIKE</button><style data-emotion="css qkt14p">.css-qkt14p{background-color:#e5e8ec;color:#535a65;}.css-qkt14p>img{position:absolute;left:16px;}</style><button class="share-button css-qkt14p ep629fi0"><img src="/icon/share.svg" alt="share" height="20" width="20" class="share-button css-0 ep629fi10"/>SHARE</button></div></section></article></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"마이크로서비스 아키텍처를 모노레포로 관리하기","slug":"마이크로서비스-아키텍처를-모노레포로-관리하기","content":"\u003ch2\u003e알고 들어야 하는 내용\u003c/h2\u003e\n\u003ch3\u003eMicroservices Architecture \u0026#x26; Monolithic Architecture\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003eMicroservices Architecture \u0026#x26; Monolithic Architecture\n주로 백엔드에서 많이 다루는 내용이긴 하지만 프론트엔드 입장에서 서술하겠습니다.\u003cbr\u003e\nfrontend에서는 msa를 microservices가 아닌 microfrontends로 많이 불립니다.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e최근 몇 년동안 MSA 돌풍이 불었습니다. MSA는 서비스들을 모듈단위로 작게 쪼개어 관리를 하는 것으로 예전부터 설계해온 Monolithic Architecture 와는 반대되는 아키텍처입니다.\u003c/p\u003e\n\u003cp\u003eMSA를 사용했을 때 여러 장점들이 있는데 거대한 서비스들을 작은 단위로 쪼갬으로써 빌드시간이 줄어들고 특정 부분의 장애가 전체 서비스의 장애로 이어지지 않고 장애가 발생한 특정 모듈만 교체함으로 써 문제해결이 가능하게 되었습니다.(가용성)\u003c/p\u003e\n\u003cp\u003e뿐만 아니라 배포나 버전관리도 전체 서비스단위로 하는게 아닌 업데이트가 필요한 모듈만 배포를 함으로써 유지보수성도 매우 높아졌습니다.\u003c/p\u003e\n\u003cp\u003e하지만 장점만 있는건 아니였습니다. 하나로 있던 모듈들을 쪼개버리니 공통으로 사용하고 있던 부분들이 모듈들에 중복으로 들어가게 되고, 모듈들이 통신하기 위한 중계 서비스 혹은 message queue(ex. kafka)의 사용이 필수가 됨으로써 서비스 자체의 크기가 더욱 커지게 되었습니다.\u003c/p\u003e\n\u003ch2\u003eOverview\u003c/h2\u003e\n\u003cp\u003e현재 회사의 프론트엔드 프로젝트는 마이크로서비스 아키텍처를 지향하며 개발하고 있습니다. 웹뷰의 경우 도메인 하나를 사용하지만 총 4개의 서비스들로 구성이 되어 있습니다.\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth align=\"center\"\u003epath\u003c/th\u003e\n\u003cth align=\"center\"\u003edescription\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e\u003ccode\u003e/D\u003c/code\u003e\u003c/td\u003e\n\u003ctd align=\"center\"\u003eA 서비스\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e\u003ccode\u003e/C\u003c/code\u003e\u003c/td\u003e\n\u003ctd align=\"center\"\u003eB 서비스\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e\u003ccode\u003e/B\u003c/code\u003e\u003c/td\u003e\n\u003ctd align=\"center\"\u003eC 서비스\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003e\u003ccode\u003e/A\u003c/code\u003e\u003c/td\u003e\n\u003ctd align=\"center\"\u003eD 서비스\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e네 개의 프로젝트를 다루면서 여러 장단점들이 있었는데 정리하면 다음과 같습니다.\u003c/p\u003e\n\u003ch3\u003e장점\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e프로젝트 별로 기술스택을 다르게 가져갈 수 있다.\n\u003cul\u003e\n\u003cli\u003e실제로 A 서비스는 vue, 다른 서비스들은 react로 개발하고 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e프로젝트를 작게 가져감으로써 빌드 시간을 줄일 수 있다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e단점\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e여러 기술스택을 사용하니 다른 개발자들에게 부담이 될 수 있다.\u003c/li\u003e\n\u003cli\u003e새로운 서비스를 만들어야 할 때 프로젝트 셋팅을 처음부터 다시 해야한다.\n\u003cul\u003e\n\u003cli\u003erepo 생성\u003c/li\u003e\n\u003cli\u003e브랜치 rule 설정\u003c/li\u003e\n\u003cli\u003e.github meta setting\u003c/li\u003e\n\u003cli\u003eci \u0026#x26; cd setting (너무 공수가 많이든다.)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e공통 모듈과 환경설정들을 공유할 수 없다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e어떻게 문제를 해결할 수 있을까?\u003c/h2\u003e\n\u003cp\u003e위에 서술한 단점들을 해결하기 위해서 microfrontends에서는 monorepo를 도입하기 시작했습니다. (회사 웹뷰의 경우 모든 프로젝트들을 각기 다른 레포로 관리하는 multirepo 방식을 사용하고 있습니다.)\u003c/p\u003e\n\u003cp\u003eyarn workspace와 lerna를 통해 여러 서비스들을 monorepo로 관리가 가능한데, 이렇게 했을 때 환경설정과 공통 컴포넌트 \u0026#x26; 함수들을 상위에 정의함으로써 공유가 가능하고, 서비스들은 packages를 통해 msa로 관리가 가능해졌습니다.\u003c/p\u003e\n\u003ch3\u003e그렇다면 이제, 웹뷰 프로젝트에 적용해볼까?\u003c/h3\u003e\n\u003cp\u003e위에서도 설명했듯이 웹뷰 프로젝트들은 두개의 프레임워크를 사용하고 있다고 했습니다. 이렇게 서비스들이 프레임워크를 다르게 사용하니 공통 컴포넌트를 사용할 수도 없고, 환경설정도 모두 다르게 셋팅 해줘야하는 문제 발생했습니다. 모노레포의 장점을 전혀 살리지 못하는거죠.\u003c/p\u003e\n\u003cp\u003e그래서 모노레포로 서비스들을 마이그레이션하는 작업을 중단하게 되었습니다. 😭\u003c/p\u003e\n\u003ch3\u003e이대로 끝인가?\u003c/h3\u003e\n\u003cp\u003e결국 모노레포로 마이그레이션은 시키지 못했지만, 그래도 할 수 있는 작업들이 있습니다. (사실 vue로 되어있는 A 프로젝트를 react로 변환하면 되지만.. 너무 공수가 큽니다 ㅠ)\u003c/p\u003e\n\u003cp\u003e현재 진행중인 디자인 시스템을 활용해 공통 컴포넌트를 모듈로 만들어 npm에 등록시키고 react를 사용하는 곳에서 가져다 사용하는 방법으로 말이죠. (eslint도 npm에 등록)\u003c/p\u003e\n\u003cp\u003e한꺼번에 많은 변화를 만들어내지는 못하겠지만 조금씩 조금씩 고쳐가고 개선해 나가면, 노력은 적게들고 개발을 빠르게 할 수 있게 될 것 같습니다.\u003c/p\u003e","tags":[{"slug":"architecture","name":"아키텍처"}]}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"마이크로서비스-아키텍처를-모노레포로-관리하기"},"buildId":"4I1s_hvn0TCXB6OZxDdyZ","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-ff94e68042added27a93.js"></script><script src="/_next/static/chunks/main-6ea43f52d44630a19477.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.b4f0be21e3e8c82dd407.js" async=""></script><script src="/_next/static/chunks/b6d3ae6728fbe7f18c7a496885d917c502ef8a97.f1fb57fac8faffcae7e5.js" async=""></script><script src="/_next/static/chunks/82588f7d1c9cede2e30aa92ab94d8815bd9a75a3.8c80dcbcc582eee35cb5.js" async=""></script><script src="/_next/static/chunks/pages/_app-2cd9b9378ad45e0c3d1d.js" async=""></script><script src="/_next/static/chunks/b2e984c5.dde205419b836c367968.js" async=""></script><script src="/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.0d2a9ee544564bfee014.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-dc9389b4382be6e937d8.js" async=""></script><script src="/_next/static/4I1s_hvn0TCXB6OZxDdyZ/_buildManifest.js" async=""></script><script src="/_next/static/4I1s_hvn0TCXB6OZxDdyZ/_ssgManifest.js" async=""></script></body></html>