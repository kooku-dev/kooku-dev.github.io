<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Kooku log RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Kooku log Atom Feed"><title data-react-helmet="true">2 posts tagged with &quot;architecture&quot; | Kooku log</title><meta data-react-helmet="true" property="og:title" content="2 posts tagged with &quot;architecture&quot; | Kooku log"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://kooku-dev.gihub.io/blog/tags/architecture/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="blog_tags_posts"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://kooku-dev.gihub.io/blog/tags/architecture/"><link data-react-helmet="true" rel="alternate" href="https://kooku-dev.gihub.io/blog/tags/architecture/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://kooku-dev.gihub.io/blog/tags/architecture/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.9e939927.css">
<link rel="preload" href="/assets/js/runtime~main.eac62b93.js" as="script">
<link rel="preload" href="/assets/js/main.13b89534.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.ico" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/favicon.ico" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Kooku&#x27;s log</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/">블로그</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kooku-dev/kooku-dev.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleChecked_a04y toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" checked="" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-tags-post-list-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_9G5K margin-bottom--md">Recent posts</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/react에서-side-effect를-관리하는-법/">React에서 side effect를 관리하는 법</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/마이크로서비스-아키텍처를-모노레포로-관리하기/">마이크로서비스 아키텍처를 모노레포로 관리하기</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/재사용-가능한-컴포넌트/">재사용 가능한 컴포넌트</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2021년-10월-둘째-주-회고/">2021년 10월 둘째 주 회고</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2021년-10월-첫째-주-회고/">2021년 10월 첫째 주 회고</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>2 posts tagged with &quot;architecture&quot;</h1><a href="/blog/tags/">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_d4p0" itemprop="headline"><a itemprop="url" href="/blog/react에서-side-effect를-관리하는-법/">React에서 side effect를 관리하는 법</a></h2><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2021-11-05T00:00:00.000Z" itemprop="datePublished">November 5, 2021</time> · <!-- -->5 min read</div></header><div class="markdown" itemprop="articleBody"><p>요즘 <code>스칼라로 배우는 함수형 프로그래밍</code> 책을 읽고 있습니다.</p><p><img src="/assets/images/functional-book-b556ffc40ee23b9467b7ab65a3b5b2d4.jpeg"></p><p>아직 2장 밖에 읽지 않았지만, 기억에 남는 문장들이 몇 개 있습니다.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>함수형 프로그래밍은 부수 효과가 없는 순수 함수들로만을 이용해 프로그램을 구축하는 것을 의미한다.</p><p>부수 효과가 없다는 것은 주어진 값에 대해 이 함수는 항상 같은 값을 돌려주는 것을 보장한다. 그리고 그 이외의 일은 <strong>전혀</strong> 일어나지 않는다.</p><p>순수함수는 하나의 블랙박스이다. 입력은 항상 함수에 대한 인수들로만 주어진다. 그리고 함수는 결과를 계산해서 돌려줄 뿐, 그것이 어떻게 쓰이는지는 신경 쓰지 않는다. 이러한 관심사의 분리 덕분에 계산 논리의 재사용성이 높아진다.</p></div></div><p>이 책에서는 순수함수를 만들기 위해 &quot;어쩔 수 없이 사용하게 되는 부수효과들은 함수의 밖으로 밀어내고 함수가 하는 일을 최대한 작게 들어라. 그래야 함수를 재사용할 수 있고 테스트도 용이하다&quot;고 말합니다.</p><p>이때 함수형 프로그래밍의 철학을 프론트엔드에 적용해보고 싶다는 생각이 들었습니다. 사실 React에서는 이미 <code>Pure Component</code>, <code>Container and Presentational Pattern</code>, <code>redux-saga</code>를 보면 알듯이 이미 순수에 대한 개념이 많이 들어와 있긴 합니다.</p><p><code>React.memo</code>와 <code>Pure Component</code>를 만들어 불필요한 re-rendering를 막게 한다던가, Bussiness Logic과 View를 담당하는 Component를 분리한다던가 (유지보수성과도 연관이 있겠지만 View를 담당하는 Component에서 side effect를 일으키는 것들을 component 밖으로 밀어내 Container Component에서 관리하게 하는 역할도 있다고 생각합니다.) Redux에서는 상태관리만 하고 그 외의 비동기 작업, api 통신, 에러처리와 같은 부수효과를 일으키는 작업들은 redux-saga에서 따로 관리하도록 말이죠. (실제로 redux-saga 공식문서의 첫화면이 &quot;An intuitive Redux side effect manager.&quot; 입니다.)</p><p><a href="https://redux-saga.js.org/" target="_blank" rel="noopener noreferrer">https://redux-saga.js.org/</a></p><p><img src="/assets/images/redux-saga-d35f4575d06e55f99c254238e9a71ff8.png"></p><p>functional programming이 pure function들의 조합으로 프로그램을 구성한다고는 하지만 부수효과가 없는 프로그램은 없다고 생각합니다. functional programming은 코드문맥에서 발생하는 공통의 패턴을 함수로 만들어 재사용하게 함을 목적으로 둔다고 생각합니다. 이때의 함수는 순수함수겠죠.
그리고 프론트에서도 공통적으로 사용되는 컴포넌트를 pure component로 만듦으로써 재사용이 가능하게 하고 테스트하기 쉽게 만들기 위해 functional programming의 철학이 필요하다고 생각합니다.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="pure-component를-만드는-법">Pure Component를 만드는 법<a aria-hidden="true" class="hash-link" href="#pure-component를-만드는-법" title="Direct link to heading">​</a></h2><p>책에서 나왔듯이 component에서 side effect가 발생하는 부분들을 최대한 밖으로 밀어내야 합니다. container component로 side-effect를 모두 빼거나, custom hooks에서 처리하게 해야합니다. 만약 redux를 사용한다면 redux-saga에서 처리하게 해야합니다.</p><p>이렇게 하면 props에 대해 컴포넌트가 어떻게 렌더링될지 예상할 수 있고 테스트하기도 쉬워집니다. props에 따라 글자나 style의 결과만 테스트하면 됩니다.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/tags/architecture/">architecture</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/tags/react/">react</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about React에서 side effect를 관리하는 법" href="/blog/react에서-side-effect를-관리하는-법/"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_d4p0" itemprop="headline"><a itemprop="url" href="/blog/마이크로서비스-아키텍처를-모노레포로-관리하기/">마이크로서비스 아키텍처를 모노레포로 관리하기</a></h2><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2021-10-30T00:00:00.000Z" itemprop="datePublished">October 30, 2021</time> · <!-- -->7 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_y2LR" id="알고-들어야-하는-내용">알고 들어야 하는 내용<a aria-hidden="true" class="hash-link" href="#알고-들어야-하는-내용" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="microservices-architecture--monolithic-architecture">Microservices Architecture &amp; Monolithic Architecture<a aria-hidden="true" class="hash-link" href="#microservices-architecture--monolithic-architecture" title="Direct link to heading">​</a></h3><blockquote><p>Microservices Architecture &amp; Monolithic Architecture
주로 백엔드에서 많이 다루는 내용이긴 하지만 프론트엔드 입장에서 서술하겠습니다.<br>
<!-- -->frontend에서는 msa를 microservices가 아닌 microfrontends로 많이 불립니다.</p></blockquote><p>최근 몇 년동안 MSA 돌풍이 불었습니다. MSA는 서비스들을 모듈단위로 작게 쪼개어 관리를 하는 것으로 예전부터 설계해온 Monolithic Architecture 와는 반대되는 아키텍처입니다.</p><p>MSA를 사용했을 때 여러 장점들이 있는데 거대한 서비스들을 작은 단위로 쪼갬으로써 빌드시간이 줄어들고 특정 부분의 장애가 전체 서비스의 장애로 이어지지 않고 장애가 발생한 특정 모듈만 교체함으로 써 문제해결이 가능하게 되었습니다.(가용성)</p><p>뿐만 아니라 배포나 버전관리도 전체 서비스단위로 하는게 아닌 업데이트가 필요한 모듈만 배포를 함으로써 유지보수성도 매우 높아졌습니다.</p><p>하지만 장점만 있는건 아니였습니다. 하나로 있던 모듈들을 쪼개버리니 공통으로 사용하고 있던 부분들이 모듈들에 중복으로 들어가게 되고, 모듈들이 통신하기 위한 중계 서비스 혹은 message queue(ex. kafka)의 사용이 필수가 됨으로써 서비스 자체의 크기가 더욱 커지게 되었습니다.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="overview">Overview<a aria-hidden="true" class="hash-link" href="#overview" title="Direct link to heading">​</a></h2><p>현재 회사의 프론트엔드 프로젝트는 마이크로서비스 아키텍처를 지향하며 개발하고 있습니다. 웹뷰의 경우 도메인 하나를 사용하지만 총 4개의 서비스들로 구성이 되어 있습니다.</p><table><thead><tr><th align="center">path</th><th align="center">description</th></tr></thead><tbody><tr><td align="center"><code>/D</code></td><td align="center">A 서비스</td></tr><tr><td align="center"><code>/C</code></td><td align="center">B 서비스</td></tr><tr><td align="center"><code>/B</code></td><td align="center">C 서비스</td></tr><tr><td align="center"><code>/A</code></td><td align="center">D 서비스</td></tr></tbody></table><p>네 개의 프로젝트를 다루면서 여러 장단점들이 있었는데 정리하면 다음과 같습니다.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="장점">장점<a aria-hidden="true" class="hash-link" href="#장점" title="Direct link to heading">​</a></h3><ul><li>프로젝트 별로 기술스택을 다르게 가져갈 수 있다.<ul><li>실제로 A 서비스는 vue, 다른 서비스들은 react로 개발하고 있습니다.</li></ul></li><li>프로젝트를 작게 가져감으로써 빌드 시간을 줄일 수 있다.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="단점">단점<a aria-hidden="true" class="hash-link" href="#단점" title="Direct link to heading">​</a></h3><ul><li>여러 기술스택을 사용하니 다른 개발자들에게 부담이 될 수 있다.</li><li>새로운 서비스를 만들어야 할 때 프로젝트 셋팅을 처음부터 다시 해야한다.<ul><li>repo 생성</li><li>브랜치 rule 설정</li><li>.github meta setting</li><li>ci &amp; cd setting (너무 공수가 많이든다.)</li></ul></li><li>공통 모듈과 환경설정들을 공유할 수 없다.</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="어떻게-문제를-해결할-수-있을까">어떻게 문제를 해결할 수 있을까?<a aria-hidden="true" class="hash-link" href="#어떻게-문제를-해결할-수-있을까" title="Direct link to heading">​</a></h2><p>위에 서술한 단점들을 해결하기 위해서 microfrontends에서는 monorepo를 도입하기 시작했습니다. (회사 웹뷰의 경우 모든 프로젝트들을 각기 다른 레포로 관리하는 multirepo 방식을 사용하고 있습니다.)</p><p>yarn workspace와 lerna를 통해 여러 서비스들을 monorepo로 관리가 가능한데, 이렇게 했을 때 환경설정과 공통 컴포넌트 &amp; 함수들을 상위에 정의함으로써 공유가 가능하고, 서비스들은 packages를 통해 msa로 관리가 가능해졌습니다.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="그렇다면-이제-웹뷰-프로젝트에-적용해볼까">그렇다면 이제, 웹뷰 프로젝트에 적용해볼까?<a aria-hidden="true" class="hash-link" href="#그렇다면-이제-웹뷰-프로젝트에-적용해볼까" title="Direct link to heading">​</a></h3><p>위에서도 설명했듯이 웹뷰 프로젝트들은 두개의 프레임워크를 사용하고 있다고 했습니다. 이렇게 서비스들이 프레임워크를 다르게 사용하니 공통 컴포넌트를 사용할 수도 없고, 환경설정도 모두 다르게 셋팅 해줘야하는 문제 발생했습니다. 모노레포의 장점을 전혀 살리지 못하는거죠.</p><p>그래서 모노레포로 서비스들을 마이그레이션하는 작업을 중단하게 되었습니다. 😭</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="이대로-끝인가">이대로 끝인가?<a aria-hidden="true" class="hash-link" href="#이대로-끝인가" title="Direct link to heading">​</a></h3><p>결국 모노레포로 마이그레이션은 시키지 못했지만, 그래도 할 수 있는 작업들이 있습니다. (사실 vue로 되어있는 A 프로젝트를 react로 변환하면 되지만.. 너무 공수가 큽니다 ㅠ)</p><p>현재 진행중인 디자인 시스템을 활용해 공통 컴포넌트를 모듈로 만들어 npm에 등록시키고 react를 사용하는 곳에서 가져다 사용하는 방법으로 말이죠. (eslint도 npm에 등록)</p><p>한꺼번에 많은 변화를 만들어내지는 못하겠지만 조금씩 조금씩 고쳐가고 개선해 나가면, 노력은 적게들고 개발을 빠르게 할 수 있게 될 것 같습니다.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/tags/architecture/">architecture</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 마이크로서비스 아키텍처를 모노레포로 관리하기" href="/blog/마이크로서비스-아키텍처를-모노레포로-관리하기/"><b>Read More</b></a></div></footer></article></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/">블로그</a></li><li class="footer__item"><a href="https://github.com/kooku-dev/kooku-dev.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 kooku-log, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.eac62b93.js"></script>
<script src="/assets/js/main.13b89534.js"></script>
</body>
</html>