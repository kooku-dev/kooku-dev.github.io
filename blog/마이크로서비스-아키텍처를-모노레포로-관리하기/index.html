<!doctype html>
<html lang="ko" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Kooku log RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Kooku log Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KVSM4B0KPY"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KVSM4B0KPY",{})</script><title data-react-helmet="true">마이크로서비스 아키텍처를 모노레포로 관리하기 | Kooku log</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://kooku0.gihub.io/blog/마이크로서비스-아키텍처를-모노레포로-관리하기/"><meta data-react-helmet="true" name="docusaurus_locale" content="ko"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="마이크로서비스 아키텍처를 모노레포로 관리하기 | Kooku log"><meta data-react-helmet="true" name="description" content="알고 들어야 하는 내용"><meta data-react-helmet="true" property="og:description" content="알고 들어야 하는 내용"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-10-30T00:00:00.000Z"><meta data-react-helmet="true" property="article:tag" content="architecture"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://kooku0.gihub.io/blog/마이크로서비스-아키텍처를-모노레포로-관리하기/"><link data-react-helmet="true" rel="alternate" href="https://kooku0.gihub.io/en/blog/마이크로서비스-아키텍처를-모노레포로-관리하기/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://kooku0.gihub.io/blog/마이크로서비스-아키텍처를-모노레포로-관리하기/" hreflang="ko"><link data-react-helmet="true" rel="alternate" href="https://kooku0.gihub.io/blog/마이크로서비스-아키텍처를-모노레포로-관리하기/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.5b7f8d25.css">
<link rel="preload" href="/assets/js/runtime~main.5c2ea286.js" as="script">
<link rel="preload" href="/assets/js/main.10fb10a4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">본문으로 건너뛰기</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.ico" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/favicon.ico" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Kooku&#x27;s log</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/">블로그</a><a class="navbar__item navbar__link" href="/docs/books/">책</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kooku0/kooku0.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleChecked_cnQY toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">🌜</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">🌞</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" checked="" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_a9qW thin-scrollbar" aria-label="최근 블로그 문서 둘러보기"><div class="sidebarItemTitle_uKok margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Kvuv"><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/컴포넌트를-어떻게-만들어야할까/">컴포넌트를 어떻게 만들어야 할까?</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/프론트엔드에서-테스트코드 짜기/">프론트엔드에서 테스트코드 짜기</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/컴포넌트-응집도/">컴포넌트 응집도</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/react에서-side-effect를-관리하는-법/">React에서 side effect를 관리하는 법</a></li><li class="sidebarItem_CF0Q"><a aria-current="page" class="sidebarItemLink_miNk sidebarItemLinkActive_RRTD" href="/blog/마이크로서비스-아키텍처를-모노레포로-관리하기/">마이크로서비스 아키텍처를 모노레포로 관리하기</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_rzP5" itemprop="headline">마이크로서비스 아키텍처를 모노레포로 관리하기</h1><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2021-10-30T00:00:00.000Z" itemprop="datePublished">2021년 10월 30일</time> · <!-- -->약 7분</div></header><div id="post-content" class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_mojV" id="알고-들어야-하는-내용">알고 들어야 하는 내용<a class="hash-link" href="#알고-들어야-하는-내용" title="제목으로 바로 가기">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="microservices-architecture--monolithic-architecture">Microservices Architecture &amp; Monolithic Architecture<a class="hash-link" href="#microservices-architecture--monolithic-architecture" title="제목으로 바로 가기">​</a></h3><blockquote><p>Microservices Architecture &amp; Monolithic Architecture
주로 백엔드에서 많이 다루는 내용이긴 하지만 프론트엔드 입장에서 서술하겠습니다.<br>
<!-- -->frontend에서는 msa를 microservices가 아닌 microfrontends로 많이 불립니다.</p></blockquote><p>최근 몇 년동안 MSA 돌풍이 불었습니다. MSA는 서비스들을 모듈단위로 작게 쪼개어 관리를 하는 것으로 예전부터 설계해온 Monolithic Architecture 와는 반대되는 아키텍처입니다.</p><p>MSA를 사용했을 때 여러 장점들이 있는데 거대한 서비스들을 작은 단위로 쪼갬으로써 빌드시간이 줄어들고 특정 부분의 장애가 전체 서비스의 장애로 이어지지 않고 장애가 발생한 특정 모듈만 교체함으로 써 문제해결이 가능하게 되었습니다.(가용성)</p><p>뿐만 아니라 배포나 버전관리도 전체 서비스단위로 하는게 아닌 업데이트가 필요한 모듈만 배포를 함으로써 유지보수성도 매우 높아졌습니다.</p><p>하지만 장점만 있는건 아니였습니다. 하나로 있던 모듈들을 쪼개버리니 공통으로 사용하고 있던 부분들이 모듈들에 중복으로 들어가게 되고, 모듈들이 통신하기 위한 중계 서비스 혹은 message queue(ex. kafka)의 사용이 필수가 됨으로써 서비스 자체의 크기가 더욱 커지게 되었습니다.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="overview">Overview<a class="hash-link" href="#overview" title="제목으로 바로 가기">​</a></h2><p>현재 회사의 프론트엔드 프로젝트는 마이크로서비스 아키텍처를 지향하며 개발하고 있습니다. 웹뷰의 경우 도메인 하나를 사용하지만 총 4개의 서비스들로 구성이 되어 있습니다.</p><table><thead><tr><th align="center">path</th><th align="center">description</th></tr></thead><tbody><tr><td align="center"><code>/a</code></td><td align="center">A 서비스</td></tr><tr><td align="center"><code>/b</code></td><td align="center">B 서비스</td></tr><tr><td align="center"><code>/c</code></td><td align="center">C 서비스</td></tr><tr><td align="center"><code>/d</code></td><td align="center">D 서비스</td></tr></tbody></table><p>네 개의 프로젝트를 다루면서 여러 장단점들이 있었는데 정리하면 다음과 같습니다.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="장점">장점<a class="hash-link" href="#장점" title="제목으로 바로 가기">​</a></h3><ul><li>프로젝트 별로 기술스택을 다르게 가져갈 수 있다.<ul><li>실제로 A 서비스는 vue, 다른 서비스들은 react로 개발하고 있습니다.</li></ul></li><li>프로젝트를 작게 가져감으로써 빌드 시간을 줄일 수 있다.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="단점">단점<a class="hash-link" href="#단점" title="제목으로 바로 가기">​</a></h3><ul><li>여러 기술스택을 사용하니 다른 개발자들에게 부담이 될 수 있다.</li><li>새로운 서비스를 만들어야 할 때 프로젝트 셋팅을 처음부터 다시 해야한다.<ul><li>repo 생성</li><li>브랜치 rule 설정</li><li>.github meta setting</li><li>ci &amp; cd setting (너무 공수가 많이든다.)</li></ul></li><li>공통 모듈과 환경설정들을 공유할 수 없다.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="어떻게-문제를-해결할-수-있을까">어떻게 문제를 해결할 수 있을까?<a class="hash-link" href="#어떻게-문제를-해결할-수-있을까" title="제목으로 바로 가기">​</a></h2><p>위에 서술한 단점들을 해결하기 위해서 microfrontends에서는 monorepo를 도입하기 시작했습니다. (회사 웹뷰의 경우 모든 프로젝트들을 각기 다른 레포로 관리하는 multirepo 방식을 사용하고 있습니다.)</p><p>yarn workspace와 lerna를 통해 여러 서비스들을 monorepo로 관리가 가능한데, 이렇게 했을 때 환경설정과 공통 컴포넌트 &amp; 함수들을 상위에 정의함으로써 공유가 가능하고, 서비스들은 packages를 통해 msa로 관리가 가능해졌습니다.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="그렇다면-이제-웹뷰-프로젝트에-적용해볼까">그렇다면 이제, 웹뷰 프로젝트에 적용해볼까?<a class="hash-link" href="#그렇다면-이제-웹뷰-프로젝트에-적용해볼까" title="제목으로 바로 가기">​</a></h3><p>위에서도 설명했듯이 웹뷰 프로젝트들은 두개의 프레임워크를 사용하고 있다고 했습니다. 이렇게 서비스들이 프레임워크를 다르게 사용하니 공통 컴포넌트를 사용할 수도 없고, 환경설정도 모두 다르게 셋팅 해줘야하는 문제 발생했습니다. 모노레포의 장점을 전혀 살리지 못하는거죠.</p><p>그래서 모노레포로 서비스들을 마이그레이션하는 작업을 중단하게 되었습니다. 😭</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="이대로-끝인가">이대로 끝인가?<a class="hash-link" href="#이대로-끝인가" title="제목으로 바로 가기">​</a></h3><p>결국 모노레포로 마이그레이션은 시키지 못했지만, 그래도 할 수 있는 작업들이 있습니다. (사실 vue로 되어있는 A 프로젝트를 react로 변환하면 되지만.. 너무 공수가 큽니다 ㅠ)</p><p>현재 진행중인 디자인 시스템을 활용해 공통 컴포넌트를 모듈로 만들어 npm에 등록시키고 react를 사용하는 곳에서 가져다 사용하는 방법으로 말이죠. (eslint도 npm에 등록)</p><p>한꺼번에 많은 변화를 만들어내지는 못하겠지만 조금씩 조금씩 고쳐가고 개선해 나가면, 노력은 적게들고 개발을 빠르게 할 수 있게 될 것 같습니다.</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_h6_j"><div class="col"><b>태그:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/architecture/">architecture</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/kooku0/kooku0.github.io/edit/main/blog/마이크로서비스-아키텍처를-모노레포로-관리하기.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>페이지 편집</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="블로그 게시물 탐색"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/react에서-side-effect를-관리하는-법/"><div class="pagination-nav__sublabel">이전 게시물</div><div class="pagination-nav__label">React에서 side effect를 관리하는 법</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/재사용-가능한-컴포넌트/"><div class="pagination-nav__sublabel">다음 게시물</div><div class="pagination-nav__label">재사용 가능한 컴포넌트</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_cNA8 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#알고-들어야-하는-내용" class="table-of-contents__link toc-highlight">알고 들어야 하는 내용</a><ul><li><a href="#microservices-architecture--monolithic-architecture" class="table-of-contents__link toc-highlight">Microservices Architecture &amp; Monolithic Architecture</a></li></ul></li><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a><ul><li><a href="#장점" class="table-of-contents__link toc-highlight">장점</a></li><li><a href="#단점" class="table-of-contents__link toc-highlight">단점</a></li></ul></li><li><a href="#어떻게-문제를-해결할-수-있을까" class="table-of-contents__link toc-highlight">어떻게 문제를 해결할 수 있을까?</a><ul><li><a href="#그렇다면-이제-웹뷰-프로젝트에-적용해볼까" class="table-of-contents__link toc-highlight">그렇다면 이제, 웹뷰 프로젝트에 적용해볼까?</a></li><li><a href="#이대로-끝인가" class="table-of-contents__link toc-highlight">이대로 끝인가?</a></li></ul></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/">블로그</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/books/">책</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/kooku0/kooku0.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 kooku's log, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5c2ea286.js"></script>
<script src="/assets/js/main.10fb10a4.js"></script>
</body>
</html>